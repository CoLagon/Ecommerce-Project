
//array of object literals
var JEANS = [
    {
      SKU: 1324,
      title: "RUSTIC DIME SHREDDED JEANS",
      fit: "TAPER FIT",
      color: "black",
      sizes: [ 30, 32, 34 ],
      image: ["https://cdn.shopify.com/s/files/1/0452/6221/products/110raw_1024x1024.jpg?v=1492608239"],
      description: "Get a stylish street look loaded with comfort with the new Biker Black Shredded jeans from Rustic Dime. A stylish tapered fit will have you looking your best in the black colorway that features custom knee panels and hand cut tears on the front for a shredded look and a cotton-spandex construction for a comfortable fit with plenty of stretch.",
      id: 3
    },
    {
      SKU: 1234,
      title: "SAINT VERNON",
      fit: "TAPER FIT",
      color: "blue",
      sizes: [ 28, 30, 32 ],
      image: ["https://cdn.shopify.com/s/files/1/0452/6221/products/rustic-dime-saint-vernon-taper-fit-1_1024x1024-1_1024x1024.jpg?v=1492608261%22", "https://cdn.shopify.com/s/files/1/0452/6221/products/rustic-dime-saint-vernon-taper-fit-2_1024x1024.jpg?v=1492608262"],
      description: "Our Saint Vernon Taper Fit denim features distressed and tattered details. Each pair is hand cut and sanded for a unique look. 100% cotton bleached american denim. Made in Los Angeles.",
      id: 1
    },
    {
      SKU: 4321,
      title: "BLACK",
      fit: "SKINNY FIT",
      color: "black",
      sizes: [ 28, 30, 32 ],
      image: ["https://cdn.shopify.com/s/files/1/0452/6221/products/105black_1024x1024.jpg?v=1492608011", "https://cdn.shopify.com/s/files/1/0452/6221/products/105black_b_1024x1024.jpg?v=1492608012","https://cdn.shopify.com/s/files/1/0452/6221/products/105black_c_1024x1024.jpg?v=1492608013"],
      description: "Our signature Black Skinny Fit denim is a fan favorite. Made from a garment dyed 98% cotton 2% spandex, these jeans are perfect for everyday wear. Made in Los Angeles.",
      id: 2
    },
    {
      SKU: 1324,
      title: "what a blast",
      fit: "TAPER FIT",
      color: "black",
      sizes: [ 30, 32, 34 ],
      image: ["https://cdn.shopify.com/s/files/1/0452/6221/products/110raw_1024x1024.jpg?v=1492608239"],
      description: "Get a stylish street look loaded with comfort with the new Biker Black Shredded jeans from Rustic Dime. A stylish tapered fit will have you looking your best in the black colorway that features custom knee panels and hand cut tears on the front for a shredded look and a cotton-spandex construction for a comfortable fit with plenty of stretch.",
      id: 4
    },
    {
      SKU: 1324,
      title: "some of a bitch",
      fit: "TAPER FIT",
      color: "black",
      sizes: [ 30, 32, 34 ],
      image: ["https://cdn.shopify.com/s/files/1/0452/6221/products/110raw_1024x1024.jpg?v=1492608239"],
      description: "Get a stylish street look loaded with comfort with the new Biker Black Shredded jeans from Rustic Dime. A stylish tapered fit will have you looking your best in the black colorway that features custom knee panels and hand cut tears on the front for a shredded look and a cotton-spandex construction for a comfortable fit with plenty of stretch.",
      id: 5
    },
    {
      SKU: 1324,
      title: "I got way to fly yesterday",
      fit: "TAPER FIT",
      color: "black",
      sizes: [ 30, 32, 34 ],
      image: ["https://cdn.shopify.com/s/files/1/0452/6221/products/110raw_1024x1024.jpg?v=1492608239"],
      description: "Get a stylish street look loaded with comfort with the new Biker Black Shredded jeans from Rustic Dime. A stylish tapered fit will have you looking your best in the black colorway that features custom knee panels and hand cut tears on the front for a shredded look and a cotton-spandex construction for a comfortable fit with plenty of stretch.",
      id: 6
    },
    {
      SKU: 1324,
      title: "george is my bro",
      fit: "TAPER FIT",
      color: "black",
      sizes: [ 30, 32, 34 ],
      image: ["https://cdn.shopify.com/s/files/1/0452/6221/products/110raw_1024x1024.jpg?v=1492608239"],
      description: "Get a stylish street look loaded with comfort with the new Biker Black Shredded jeans from Rustic Dime. A stylish tapered fit will have you looking your best in the black colorway that features custom knee panels and hand cut tears on the front for a shredded look and a cotton-spandex construction for a comfortable fit with plenty of stretch.",
      id: 7
    },
    {
      SKU: 1324,
      title: "funny money",
      fit: "TAPER FIT",
      color: "black",
      sizes: [ 30, 32, 34 ],
      image: ["https://cdn.shopify.com/s/files/1/0452/6221/products/110raw_1024x1024.jpg?v=1492608239"],
      description: "Get a stylish street look loaded with comfort with the new Biker Black Shredded jeans from Rustic Dime. A stylish tapered fit will have you looking your best in the black colorway that features custom knee panels and hand cut tears on the front for a shredded look and a cotton-spandex construction for a comfortable fit with plenty of stretch.",
      id: 8
    },
    {
      SKU: 1324,
      title: "goofy mothertrucker",
      fit: "TAPER FIT",
      color: "black",
      sizes: [ 30, 32, 34 ],
      image: ["http://media.npr.org/assets/img/2015/09/23/ap_836720500193-13f1674f764e5180cf9f3349cfef258d181f2b32-s900-c85.jpg"],
      description: "Get a stylish street look loaded with comfort with the new Biker Black Shredded jeans from Rustic Dime. A stylish tapered fit will have you looking your best in the black colorway that features custom knee panels and hand cut tears on the front for a shredded look and a cotton-spandex construction for a comfortable fit with plenty of stretch.",
      id: 9
    },
    {
      SKU: 4321,
      title: "BLACK",
      fit: "SKINNY FIT",
      color: "black",
      sizes: [ 28, 30, 32 ],
      image: ["https://cdn.shopify.com/s/files/1/0452/6221/products/105black_1024x1024.jpg?v=1492608011", "https://cdn.shopify.com/s/files/1/0452/6221/products/105black_b_1024x1024.jpg?v=1492608012","https://cdn.shopify.com/s/files/1/0452/6221/products/105black_c_1024x1024.jpg?v=1492608013"],
      description: "Our signature Black Skinny Fit denim is a fan favorite. Made from a garment dyed 98% cotton 2% spandex, these jeans are perfect for everyday wear. Made in Los Angeles.",
      id: 10
    },
    {
      SKU: 1324,
      title: "what a blast",
      fit: "TAPER FIT",
      color: "black",
      sizes: [ 30, 32, 34 ],
      image: ["https://cdn.shopify.com/s/files/1/0452/6221/products/110raw_1024x1024.jpg?v=1492608239"],
      description: "Get a stylish street look loaded with comfort with the new Biker Black Shredded jeans from Rustic Dime. A stylish tapered fit will have you looking your best in the black colorway that features custom knee panels and hand cut tears on the front for a shredded look and a cotton-spandex construction for a comfortable fit with plenty of stretch.",
      id: 11
    },
    {
      SKU: 4321,
      title: "BLACK",
      fit: "SKINNY FIT",
      color: "black",
      sizes: [ 28, 30, 32 ],
      image: ["https://cdn.shopify.com/s/files/1/0452/6221/products/105black_1024x1024.jpg?v=1492608011", "https://cdn.shopify.com/s/files/1/0452/6221/products/105black_b_1024x1024.jpg?v=1492608012","https://cdn.shopify.com/s/files/1/0452/6221/products/105black_c_1024x1024.jpg?v=1492608013"],
      description: "Our signature Black Skinny Fit denim is a fan favorite. Made from a garment dyed 98% cotton 2% spandex, these jeans are perfect for everyday wear. Made in Los Angeles.",
      id: 12
    },
    {
      SKU: 1324,
      title: "what a blast",
      fit: "TAPER FIT",
      color: "black",
      sizes: [ 30, 32, 34 ],
      image: ["https://cdn.shopify.com/s/files/1/0452/6221/products/110raw_1024x1024.jpg?v=1492608239"],
      description: "Get a stylish street look loaded with comfort with the new Biker Black Shredded jeans from Rustic Dime. A stylish tapered fit will have you looking your best in the black colorway that features custom knee panels and hand cut tears on the front for a shredded look and a cotton-spandex construction for a comfortable fit with plenty of stretch.",
      id: 13
    },
    {
      SKU: 4321,
      title: "BLACK",
      fit: "SKINNY FIT",
      color: "black",
      sizes: [ 28, 30, 32 ],
      image: ["https://cdn.shopify.com/s/files/1/0452/6221/products/105black_1024x1024.jpg?v=1492608011", "https://cdn.shopify.com/s/files/1/0452/6221/products/105black_b_1024x1024.jpg?v=1492608012","https://cdn.shopify.com/s/files/1/0452/6221/products/105black_c_1024x1024.jpg?v=1492608013"],
      description: "Our signature Black Skinny Fit denim is a fan favorite. Made from a garment dyed 98% cotton 2% spandex, these jeans are perfect for everyday wear. Made in Los Angeles.",
      id: 14
    },
    {
      SKU: 1324,
      title: "what a blast",
      fit: "TAPER FIT",
      color: "black",
      sizes: [ 30, 32, 34 ],
      image: ["https://cdn.shopify.com/s/files/1/0452/6221/products/110raw_1024x1024.jpg?v=1492608239"],
      description: "Get a stylish street look loaded with comfort with the new Biker Black Shredded jeans from Rustic Dime. A stylish tapered fit will have you looking your best in the black colorway that features custom knee panels and hand cut tears on the front for a shredded look and a cotton-spandex construction for a comfortable fit with plenty of stretch.",
      id: 15
    }
];

var Clothes = {
  jeans: [
    {
      title: "black rustic jeans"
    },
    {
      title: "green rustic jeans"
    }
  ],
  shirts: [
    {
      title: "black shirt"
    },
    {
      title: "green shirt"
    }
  ],
  shoes: [
    {
      title: "black shoes"
    },
    {
      title: "green shoes"
    }
  ]
}



/**********************ImageFrame Comoponent*************************************/

function DisplayImage2(props) {
  return (
    <div className={"column is-" + props.imageWidth + ""}>
        <div className="card">
          <div className="card-image">
            <figure className="image is-2by3">
                <img src={props.image} onMouseOver={ function() {
                  var len = props.image.length;
                  props.onFlipImage(len);
                }} onMouseOut={function() {props.onToDefault();}} onClick={function() { console.log('whoa')}}/>
            </figure>
          </div>
        </div>
        <div>
          <h1>{props.title}</h1>
          <h1>{props.id}</h1>
        </div>
    </div>
  );
}
function DisplayImage3(props) {
        return (
          <div className={"column is-" + props.imageWidth + ""}>
              <div className="card">
                <div className="card-image">
                  <figure className="image is-2by3">
                      <img src={props.image} onMouseOver={ function() {
                        var len = props.image.length;
                        props.onFlipImage(len);
                      }} onMouseOut={function() {props.onToDefault();}} />
                  </figure>
                </div>
              </div>
                <p>{props.title}</p>
                <p>tell me</p>
                <p>{props.id}</p>
          </div>
        );
}

function BoxDash(props) {
  console.log(props.imageWidth);
  return (
    <div id="widt" className={"column is-" + props.imageWidth + " has-text-centered"}>
        <div id="box-dash">
          <div id="Cheight"><i className="fa fa-plus-circle fa-5x"></i></div>
        </div>
        <div id="lift"></div>
    </div>
  )
}

function ManageColumns(props) {
  return (
    <div className="has-text-right">
      <i className="fa fa-plus fa-2x" onClick={function() {props.onIncreaseColumns(1)}}></i>
    </div>
  );
}

var DisplayImage = React.createClass({
  flipImage: function(len) {
    var loopImage = function(i) {
      if(i < len) {
        this.Timeout = setTimeout(function() {
          this.setState({image: this.props.image[i]})
          loopImage(i + 1);
        }.bind(this), 500)
      }
    }.bind(this);
    loopImage(1);
  },
  toDefault: function() {
    clearTimeout(this.Timeout);
    this.setState(this.getInitialState());
  },
  componentDidMount: function() {
 //    const interval = setInterval(() => {
 //      var DOMnode = document.getElementsByClassName('image')[this.props.len - 1];
 //      if(DOMnode){
 //        var node = ReactDOM.findDOMNode(DOMnode);
 //
 //        var nodeHeight = node.clientHeight;
 //        var nodeWidth = node.clientWidth;
 //        var plusIconDOM = document.getElementById('Cheight');
 //        var icon = ReactDOM.findDOMNode(plusIconDOM);
 //        var iconHeight = icon.clientHeight;
 //
 //        var height = nodeHeight - iconHeight;
 //
 //        document.getElementById("Cheight").style.marginTop = "" + height/2 + "px";
 //        document.getElementById("Cheight").style.marginBottom = "" + height/2 + "px";
 //     this.setState({})
 //   } else {
 //     this.componentDidMount = function() { return false; }
 //   }
 //
 // }, 300)
  },
  getInitialState: function() {
    return {
            len: this.props.len,
            image: this.props.image,
            theRemaining: this.props.len - this.props.remainder,
            toggle: "show",
            size: "size"
           }
  },
  render: function() {
     if (this.props.id > this.state.theRemaining) {
        return (
          <DisplayImage3
            len={this.state.len}
            id={this.props.id}
            title={this.props.title}
            sizes={this.props.sizes}
            size={this.state.size}
            toggle={this.state.toggle}
            image={this.state.image}
            imageWidth={this.props.imageWidth}
            onFlipImage={function(len) {this.flipImage(len)}.bind(this)}
            onToDefault={function() {this.toDefault()}.bind(this)}
            onButtonDrop={function(id) {this.dropButton(id)}.bind(this)}
            onSizeSelect={function(size, id) {this.sizeSelect(size, id)}.bind(this)}
            />
          );
      } else {
        return (
          <DisplayImage2
            id={this.props.id}
            title={this.props.title}
            sizes={this.props.sizes}
            size={this.state.size}
            toggle={this.state.toggle}
            imageWidth={this.props.imageWidth}
            image={this.state.image}
            onFlipImage={function(len) {this.flipImage(len)}.bind(this)}
            onToDefault={function() {this.toDefault()}.bind(this)}
            onButtonDrop={function(id) {this.dropButton(id)}.bind(this)}
            onSizeSelect={function(size, id) {this.sizeSelect(size, id)}.bind(this)}
            />
        );
      }
  }
})

var ExtractObjects = React.createClass({
  getInitialState: function() {
    return {
      objects: this.props.objects,
      imageWidth: Math.ceil(12 / this.props.columns)
    }
  },
  render: function() {
    // console.log("Erender", this.props.columns);
    // console.log("eimageWidth", this.state.imageWidth);
    // console.log(this.props.len);
      return (
        <div className="columns is-vcentered">
        {this.state.objects.map(function(object, index){
          if(object.id == this.props.len && this.props.admin) {
            return (
              [ <DisplayImage
                  admin={this.props.admin}
                  len={this.props.len}
                  key={index}
                  index={index}
                  jean={object}
                  SKU={object.SKU}
                  color={object.color}
                  description={object.description}
                  id={object.id}
                  image={object.image}
                  sizes={object.sizes}
                  title={object.title}
                  remainder={this.props.remainder}
                  imageWidth={this.state.imageWidth}
                  />,
                  <BoxDash imageWidth={this.state.imageWidth}/>
               ]
            );
          } else {
            return <DisplayImage
                      len={this.props.len}
                      key={index}
                      index={index}
                      jean={object}
                      SKU={object.SKU}
                      color={object.color}
                      description={object.description}
                      id={object.id}
                      image={object.image}
                      sizes={object.sizes}
                      title={object.title}
                      remainder={this.props.remainder}
                      imageWidth={this.state.imageWidth}
                      />
          }

        }.bind(this))}
        </div>
    );
  }
});

//Object literal or Class with properties and methods
//this class holds function expressions(methods)
/***********************Ecommerce Application*********************************************/
var Ecommerce = React.createClass({
  getInitialState: function() {
      var admin = true;
      var len = this.props.initialJeans.length;
      var arrOfObj = [];
      var columns = 7;
      var rem = len % columns;
      var rows = len / columns;
      var prevPos = 0;
      var Pos = columns;
      for(var i = 0; i < rows; i++) {
        arrOfObj.push(this.props.initialJeans.slice(prevPos, Pos));
        prevPos += columns;
        Pos += columns;
      }
    return {
      array: arrOfObj,
      remainder: rem,
      len: this.props.initialJeans.length,
      columns: columns,
      rows: rows,
      admin: admin,
      originalArr: this.props.initialJeans
    }
  },
  componentDidUpdate: function(a, b) {
    console.log("workds")
    if(this.state.newColumns != undefined) {
      console.log("unefined")
      if(this.state.newColumns != this.state.columns) {
        console.log("Not equal")
        var len = this.props.initialJeans.length;
        var arr;
        var columns = this.state.newColumns;
        var rem = len % columns;
        var rows = len / columns;
        console.log("rows", rows);
        var prevPos = 0;
        var Pos = this.state.newColumns;
        console.log(rows);


        for(var i = 0; i < this.state.array.length; i++) {
          console.log("iteration", i);
          if(i === 0) {
            this.state.array[i].push(this.state.array[i+1].splice(0,1)[0])
          } else if(this.state.array[i+1] && i === 1) {
              console.log("going through second path", i);
              var object = this.state.array[i+1].splice(0,2);
              this.state.array[i].push(object[0], object[1])
            } else if(this.state.array[i+1] && i === 2) {
              var object = this.state.array[i+1].splice(0,3);
              this.state.array[i].push(object[0], object[1], object[2]);
            }

          console.log(i);
        }
        this.setState(this.state);
        console.log(this.state.array);
        this.setState({
          columns: this.state.newColumns,
          imageWidth: 12 / this.state.newColumns,
        })
        console.log("niggernuts",this.state.array)
        this.forceUpdate();
      }
    }
  },
  increaseColumns: function(delta) {
    var newColumns = this.state.columns + delta;
    this.state.newColumns = newColumns;
    this.setState(this.state);
  },
  render: function() {
    console.log("Mapping this array", this.state.array);
    return (
      <div>
        {this.state.array.map(function(objects, index) {
          if(this.state.admin && index === 0) {
            return [<ManageColumns
                      onIncreaseColumns={this.increaseColumns}/>,
                    <ExtractObjects
                      admin={this.state.admin}
                      key={index}
                      objects={objects}
                      remainder={this.state.remainder}
                      len={this.state.len}
                      columns={this.state.columns}
                      imageWidth={this.state.imageWidth}
                      rows={this.state.rows}/>]
          } else {
            return (
              <ExtractObjects
                      admin={this.state.admin}
                      key={index}
                      objects={objects}
                      remainder={this.state.remainder}
                      len={this.state.len}
                      columns={this.state.columns}
                      imageWidth={this.state.imageWidth}
                      rows={this.state.rows}/>
                    );
          }
        }.bind(this))}
      </div>
    );
  }
});


ReactDOM.render(<Ecommerce initialJeans={JEANS} />, document.getElementById("root"));
/***********************************************************/
// propTypes: {
//   initialJeans: React.PropTypes.arrayOf(React.PropTypes.shape({
//     SKU: React.PropTypes.number.isRequired,
//     title: React.PropTypes.string.isRequired,
//     fit: React.PropTypes.string.isRequired,
//     color: React.PropTypes.string.isRequired,
//     size: React.PropTypes.arrayOf(React.PropTypes.number.isRequired),
//     image: React.PropTypes.arrayOf(React.PropTypes.string.isRequired),
//     description: React.PropTypes.string.isRequired,
//     id: React.PropTypes.number.isRequired,
//   })).isRequired
// },


/**********************************************************************************/
// <div className="column">
//     <div className="card">
//       <div className="card-image">
//         <figure className="image is-2by3">
//             <img src={this.state.image} onMouseOver={ function() {
//               var len = this.state.image.length;
//               this.flipImage(len);
//             }.bind(this) } onMouseOut={function() {this.toDefault();}.bind(this)} />
//         </figure>
//       </div>
//     </div>
//     <div>
//       {this.props.title}
//       <ButtonDrop
//           toggle={this.state.toggle}
//           sizes={this.props.size}
//           index={this.props.index}
//           size={this.state.size}
//           onSizeSelect={function(size, index) { this.sizeSelect(size, index)}.bind(this)}
//           onButtonDrop={function(index) { this.dropButton(index)}.bind(this)}/>
//     </div>
// </div>



// {this.state.jean.map(function(jean, index) {
//   this.state.image = jean.image;
//   return <ImageFrame
//       index={index}
//       id={jean.id}
//       length={this.props.length}
//       remainder={this.props.remainder}
//       image={this.state.image}
//       key={jean.id}
//       length={this.props.length}
//       columns={this.props.columns}
//       rows={this.props.rows}
//       toggle={this.state.toggle}
//       sizes={jean.size}
//       index={this.props.index}
//       size={this.state.size}
//       onSizeSelect={function(size, index) { this.sizeSelect(size, index)}.bind(this)}
//       onButtonDrop={function(index) { this.dropButton(index)}.bind(this)}
//       onFlipImage={function(length) { this.flipImage(length)}.bind(this)}
//       onToDefault={function() { this.toDefault()}.bind(this)}
//       />
// }.bind(this))}

// <ButtonDrop
//     id={props.id}
//     toggle={props.toggle}
//     sizes={props.sizes}
//     index={props.index}
//     size={props.size}
//     onSizeSelect={props.onSizeSelect }
//     onButtonDrop={props.onButtonDrop } />
/******************************************************/
/***************DispalyImage component******************************************/
// sizeSelect: function(size, id) {
//   this.setState({ size: size})
//   document.getElementById(id).style.display = "none";
// },
// dropButton: function(id) {
//   var element = document.getElementById(id);
//   var tone = element.className.split(" ")[2];
//   if(tone === "hide") {
//     element.style.display = "none";
//     this.setState({ toggle: "show" })
//   }
//   if(tone === "show")
//   {
//     element.style.display = "block";
//     this.setState({toggle: "hide"})
//   }
// },
// componentDidMount: function() {
//   document.getElementById(this.props.id).style.display = "none";
// },


// function ButtonList(props) {
//   return (
//       <li onClick={function() {props.onSize(props.size, props.id);}}><a>{props.size}</a></li>
//   );
// }
// function ButtonDrop(props) {
//   return (
//     <div className="has-dropdown">
//     <button className="button is-medium" onClick={function() {props.onButtonDrop(props.id); console.log("drop");}}>{props.size}</button>
//       <div className={"dropdown box " + props.toggle + ""} id={props.id}>
//         <ul >
//         {
//           props.sizes.map(function(size, index) {
//             return <ButtonList
//                       key={index}
//                       size={size}
//                       onSize={props.onSizeSelect}
//                       id={props.id}
//                       />
//           })
//         }
//         </ul>
//       </div>
//     </div>
//   );
// }
