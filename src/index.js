
//array of object literals
var JEANS = [
    {
      SKU: 1324,
      title: "The first item in the array",
      fit: "TAPER FIT",
      color: "black",
      sizes: [ 30, 32, 34 ],
      image: ["https://cdn.shopify.com/s/files/1/0452/6221/products/110raw_1024x1024.jpg?v=1492608239"],
      description: "Get a stylish street look loaded with comfort with the new Biker Black Shredded jeans from Rustic Dime. A stylish tapered fit will have you looking your best in the black colorway that features custom knee panels and hand cut tears on the front for a shredded look and a cotton-spandex construction for a comfortable fit with plenty of stretch.",
      id: 3
    },
    {
      SKU: 1234,
      title: "SAINT VERNON",
      fit: "TAPER FIT",
      color: "blue",
      sizes: [ 28, 30, 32 ],
      image: ["https://cdn.shopify.com/s/files/1/0452/6221/products/rustic-dime-saint-vernon-taper-fit-1_1024x1024-1_1024x1024.jpg?v=1492608261%22", "https://cdn.shopify.com/s/files/1/0452/6221/products/rustic-dime-saint-vernon-taper-fit-2_1024x1024.jpg?v=1492608262"],
      description: "Our Saint Vernon Taper Fit denim features distressed and tattered details. Each pair is hand cut and sanded for a unique look. 100% cotton bleached american denim. Made in Los Angeles.",
      id: 1
    },
    {
      SKU: 4321,
      title: "VINO SHREDDED",
      fit: "BIKER DENIM",
      color: "red",
      sizes: [ 28, 30, 32 ],
      image: ["https://cdn.shopify.com/s/files/1/0452/6221/products/105black_1024x1024.jpg?v=1492608011", "https://cdn.shopify.com/s/files/1/0452/6221/products/105black_b_1024x1024.jpg?v=1492608012","https://cdn.shopify.com/s/files/1/0452/6221/products/105black_c_1024x1024.jpg?v=1492608013"],
      description: "Our new Biker Denim features quality denim with a special knee design and hand shredding, and distressed details that are unique to each piece. 98% Cotton / 2% Spandex. Made in Los Angeles, CA.",
      id: 2
    },
    {
      SKU: 1324,
      title: "what a blast",
      fit: "TAPER FIT",
      color: "black",
      sizes: [ 30, 32, 34 ],
      image: ["https://cdn.shopify.com/s/files/1/0452/6221/products/rustic-dime-shredded-biker-4_1024x1024.jpg?v=1492608318"],
      description: "Get a stylish street look loaded with comfort with the new Biker Black Shredded jeans from Rustic Dime. A stylish tapered fit will have you looking your best in the black colorway that features custom knee panels and hand cut tears on the front for a shredded look and a cotton-spandex construction for a comfortable fit with plenty of stretch.",
      id: 4
    },
    {
      SKU: 1324,
      title: "some of a bitch",
      fit: "TAPER FIT",
      color: "black",
      sizes: [ 30, 32, 34 ],
      image: ["https://cdn.shopify.com/s/files/1/0452/6221/products/110raw_1024x1024.jpg?v=1492608239"],
      description: "Get a stylish street look loaded with comfort with the new Biker Black Shredded jeans from Rustic Dime. A stylish tapered fit will have you looking your best in the black colorway that features custom knee panels and hand cut tears on the front for a shredded look and a cotton-spandex construction for a comfortable fit with plenty of stretch.",
      id: 5
    },
    {
      SKU: 1324,
      title: "I got way to fly yesterday",
      fit: "TAPER FIT",
      color: "black",
      sizes: [ 30, 32, 34 ],
      image: ["https://cdn.shopify.com/s/files/1/0452/6221/products/110raw_1024x1024.jpg?v=1492608239"],
      description: "Get a stylish street look loaded with comfort with the new Biker Black Shredded jeans from Rustic Dime. A stylish tapered fit will have you looking your best in the black colorway that features custom knee panels and hand cut tears on the front for a shredded look and a cotton-spandex construction for a comfortable fit with plenty of stretch.",
      id: 6
    },
    {
      SKU: 1324,
      title: "george is my bro",
      fit: "TAPER FIT",
      color: "black",
      sizes: [ 30, 32, 34 ],
      image: ["https://cdn.shopify.com/s/files/1/0452/6221/products/110raw_1024x1024.jpg?v=1492608239"],
      description: "Get a stylish street look loaded with comfort with the new Biker Black Shredded jeans from Rustic Dime. A stylish tapered fit will have you looking your best in the black colorway that features custom knee panels and hand cut tears on the front for a shredded look and a cotton-spandex construction for a comfortable fit with plenty of stretch.",
      id: 7
    },
    {
      SKU: 1324,
      title: "funny money",
      fit: "TAPER FIT",
      color: "black",
      sizes: [ 30, 32, 34 ],
      image: ["https://cdn.shopify.com/s/files/1/0452/6221/products/110raw_1024x1024.jpg?v=1492608239"],
      description: "Get a stylish street look loaded with comfort with the new Biker Black Shredded jeans from Rustic Dime. A stylish tapered fit will have you looking your best in the black colorway that features custom knee panels and hand cut tears on the front for a shredded look and a cotton-spandex construction for a comfortable fit with plenty of stretch.",
      id: 8
    },
    {
      SKU: 1324,
      title: "goofy mothertrucker",
      fit: "TAPER FIT",
      color: "black",
      sizes: [ 30, 32, 34 ],
      image: ["http://media.npr.org/assets/img/2015/09/23/ap_836720500193-13f1674f764e5180cf9f3349cfef258d181f2b32-s900-c85.jpg"],
      description: "Get a stylish street look loaded with comfort with the new Biker Black Shredded jeans from Rustic Dime. A stylish tapered fit will have you looking your best in the black colorway that features custom knee panels and hand cut tears on the front for a shredded look and a cotton-spandex construction for a comfortable fit with plenty of stretch.",
      id: 9
    },
    {
      SKU: 4321,
      title: "BLACK",
      fit: "SKINNY FIT",
      color: "black",
      sizes: [ 28, 30, 32 ],
      image: ["https://cdn.shopify.com/s/files/1/0452/6221/products/105black_1024x1024.jpg?v=1492608011", "https://cdn.shopify.com/s/files/1/0452/6221/products/105black_b_1024x1024.jpg?v=1492608012","https://cdn.shopify.com/s/files/1/0452/6221/products/105black_c_1024x1024.jpg?v=1492608013"],
      description: "Our signature Black Skinny Fit denim is a fan favorite. Made from a garment dyed 98% cotton 2% spandex, these jeans are perfect for everyday wear. Made in Los Angeles.",
      id: 10
    },
    {
      SKU: 1324,
      title: "what a blast",
      fit: "TAPER FIT",
      color: "black",
      sizes: [ 30, 32, 34 ],
      image: ["https://cdn.shopify.com/s/files/1/0452/6221/products/110raw_1024x1024.jpg?v=1492608239"],
      description: "Get a stylish street look loaded with comfort with the new Biker Black Shredded jeans from Rustic Dime. A stylish tapered fit will have you looking your best in the black colorway that features custom knee panels and hand cut tears on the front for a shredded look and a cotton-spandex construction for a comfortable fit with plenty of stretch.",
      id: 11
    },
    {
      SKU: 4321,
      title: "BLACK",
      fit: "SKINNY FIT",
      color: "black",
      sizes: [ 28, 30, 32 ],
      image: ["https://cdn.shopify.com/s/files/1/0452/6221/products/105black_1024x1024.jpg?v=1492608011", "https://cdn.shopify.com/s/files/1/0452/6221/products/105black_b_1024x1024.jpg?v=1492608012","https://cdn.shopify.com/s/files/1/0452/6221/products/105black_c_1024x1024.jpg?v=1492608013"],
      description: "Our signature Black Skinny Fit denim is a fan favorite. Made from a garment dyed 98% cotton 2% spandex, these jeans are perfect for everyday wear. Made in Los Angeles.",
      id: 12
    },
    {
      SKU: 1324,
      title: "what a blast",
      fit: "TAPER FIT",
      color: "black",
      sizes: [ 30, 32, 34 ],
      image: ["https://cdn.shopify.com/s/files/1/0452/6221/products/110raw_1024x1024.jpg?v=1492608239"],
      description: "Get a stylish street look loaded with comfort with the new Biker Black Shredded jeans from Rustic Dime. A stylish tapered fit will have you looking your best in the black colorway that features custom knee panels and hand cut tears on the front for a shredded look and a cotton-spandex construction for a comfortable fit with plenty of stretch.",
      id: 13
    },
    {
      SKU: 4321,
      title: "BLACK",
      fit: "SKINNY FIT",
      color: "black",
      sizes: [ 28, 30, 32 ],
      image: ["https://cdn.shopify.com/s/files/1/0452/6221/products/105black_1024x1024.jpg?v=1492608011", "https://cdn.shopify.com/s/files/1/0452/6221/products/105black_b_1024x1024.jpg?v=1492608012","https://cdn.shopify.com/s/files/1/0452/6221/products/105black_c_1024x1024.jpg?v=1492608013"],
      description: "Our signature Black Skinny Fit denim is a fan favorite. Made from a garment dyed 98% cotton 2% spandex, these jeans are perfect for everyday wear. Made in Los Angeles.",
      id: 14
    },
    {
      SKU: 1324,
      title: "what a blast",
      fit: "TAPER FIT",
      color: "black",
      sizes: [ 30, 32, 34 ],
      image: ["https://cdn.shopify.com/s/files/1/0452/6221/products/110raw_1024x1024.jpg?v=1492608239"],
      description: "Get a stylish street look loaded with comfort with the new Biker Black Shredded jeans from Rustic Dime. A stylish tapered fit will have you looking your best in the black colorway that features custom knee panels and hand cut tears on the front for a shredded look and a cotton-spandex construction for a comfortable fit with plenty of stretch.",
      id: 15
    },
    {
      SKU: 1324,
      title: "what a blast",
      fit: "TAPER FIT",
      color: "black",
      sizes: [ 30, 32, 34 ],
      image: ["https://cdn.shopify.com/s/files/1/0452/6221/products/110raw_1024x1024.jpg?v=1492608239"],
      description: "Get a stylish street look loaded with comfort with the new Biker Black Shredded jeans from Rustic Dime. A stylish tapered fit will have you looking your best in the black colorway that features custom knee panels and hand cut tears on the front for a shredded look and a cotton-spandex construction for a comfortable fit with plenty of stretch.",
      id: 16
    }
];

var Clothes = {
  jeans: [
    {
      title: "black rustic jeans"
    },
    {
      title: "green rustic jeans"
    }
  ],
  shirts: [
    {
      title: "black shirt"
    },
    {
      title: "green shirt"
    }
  ],
  shoes: [
    {
      title: "black shoes"
    },
    {
      title: "green shoes"
    }
  ]
}

// var JEANS = [
//
// ]


/**********************ImageFrame Comoponent*************************************/

function DisplayImage2(props) {
  return (
    <div className={"column is-" + props.imageWidth + ""}>
        <div className="card money-border">
          <div className="card-image">
            <figure className="image is-2by3">
                <img src={props.image}
                     onMouseOver={ function() {var len = props.image.length; if(len) {props.onFlipImage(len);}}}
                     onMouseOut={function() {props.onToDefault();}}
                     onDragOver={function(event) {props.borderHover(event, "inset 0 1px 1px rgba(0,0,0, 0.5), 0 0 50px rgb(113,253,38)", event.target.id); event.preventDefault();}}
                     onDragLeave={function(event) {props.borderHover(event, "none");}}
                     onMouseDown={function(event) {props.drag(event);}}
                     onMouseMove={function(event) {props.move(event);}}
                     onDrop={function(event) {props.dropZone(event); props.borderHover(event, "none");}}
                     onDragStart={function(event) {event.dataTransfer.setData("data", event.target.id); props.borderHover(event)}}
                     draggable="true"
                     id={props.index}/>
            </figure>
          </div>
        </div>
        <div>
          <h1>{props.title}</h1>
          <h1>id: {props.id} index: {props.index}</h1>
        </div>
    </div>
  );
}
function DisplayImage3(props) {

  return (
    <div className={"column is-" + props.imageWidth + ""}>
        <div className="card">
          <div className="card-image">
            <figure className="image is-2by3">
                <img src={props.image}
                     onMouseOver={ function() {var len = props.image.length; if(len) {props.onFlipImage(len);}}}
                     onMouseOut={function() {props.onToDefault();}}
                     onDragOver={function(event) {props.borderHover(event, "inset 0 1px 1px rgba(0,0,0, 0.5), 0 0 50px rgb(113,253,38)"); event.preventDefault(); }}
                     onDragLeave={function(event) {props.borderHover(event, "none");}}
                     onMouseDown={function(event) {props.drag(event);}}
                     onMouseMove={function(event) {props.move(event);}}
                     onDrop={function(event) {props.dropZone(event); props.borderHover(event, "none");}}
                     onDragStart={function(event) {event.dataTransfer.setData("data", event.target.id); }}
                     draggable="true"
                     id={props.index}/>
            </figure>
          </div>
        </div>
        <div>
          <h1>{props.title}</h1>
          <h1>id: {props.id} index: {props.index}</h1>
        </div>
    </div>
  );
}

function BoxDash(props) {
  if(props.factor) {
    return (
      <div className="columns is-vcentered">
        <div id="widt" className={"column is-" + props.imageWidth + " has-text-centered"}>
            <div id="box-dash">
              <div id="Cheight"><i className="fa fa-plus-circle fa-5x"></i></div>
            </div>
            <div id="lift"></div>
        </div>
      </div>
    );
  } else {
    return (
      <div id="widt" className={"column is-" + props.imageWidth + " has-text-centered"}>
          <div id="box-dash">
            <div id="Cheight"><i className="fa fa-plus-circle fa-5x"></i></div>
          </div>
          <div id="lift"></div>
      </div>
    )
  }
}

function ManageColumns(props) {
  return (
    <div className="has-text-right">
      <i className="fa fa-minus fa-2x" onClick={function() {props.onColumnManagement(-1)}}></i>
      <i className="fa fa-plus fa-2x" onClick={function() {props.onColumnManagement(1)}}></i>
    </div>
  );
}

var DisplayImage = React.createClass({
  flipImage: function(len) {
    var loopImage = function(i) {
      if(i < len) {
        this.Timeout = setTimeout(function() {
          this.setState({image: this.props.image[i]})
          loopImage(i + 1);
        }.bind(this), 500)
      }
    }.bind(this);
    loopImage(1);
  },
  toDefault: function() {
    clearTimeout(this.Timeout);
    this.setState(this.getInitialState());
  },
  componentDidMount: function() {
 //    const interval = setInterval(() => {
 //      var DOMnode = document.getElementsByClassName('image')[this.props.len - 1];
 //      if(DOMnode){
 //        var node = ReactDOM.findDOMNode(DOMnode);
 //        console.log(node);
 //        var nodeHeight = node.clientHeight;
 //        var nodeWidth = node.clientWidth;
 //        var plusIconDOM = document.getElementById('Cheight');
 //        console.log(plusIconDOM);
 //        var icon = ReactDOM.findDOMNode(plusIconDOM);
 //        console.log(icon);
 //        var iconHeight = icon.clientHeight;
 //
 //        var height = nodeHeight - iconHeight;
 //
 //        document.getElementById("Cheight").style.marginTop = "" + height/2 + "px";
 //        document.getElementById("Cheight").style.marginBottom = "" + height/2 + "px";
 //     this.setState({})
 //   } else {
 //     this.componentDidMount = function() { return false; }
 //   }
 //
 // }, 300)
  },
  componentWillReceiveProps: function(props) {
    this.setState({
      image: props.image
    })
  },
  getInitialState: function() {
    return {
            len: this.props.len,
            theRemaining: this.props.len - this.props.remainder,
            image: this.props.image,
            toggle: "show",
            size: "size"
           }
  },
  render: function() {
     if (this.props.id > this.state.theRemaining) {
        return (
          <DisplayImage3
            index={this.props.index}
            dropZone={this.props.dropZone}
            drag={this.props.drag}
            move={this.props.move}
            borderHover={this.props.borderHover}
            len={this.state.len}
            id={this.props.id}
            title={this.props.title}
            sizes={this.props.sizes}
            size={this.state.size}
            toggle={this.state.toggle}
            image={this.state.image}
            imageWidth={this.props.imageWidth}
            onFlipImage={function(len) {this.flipImage(len)}.bind(this)}
            onToDefault={function() {this.toDefault()}.bind(this)}
            onButtonDrop={function(id) {this.dropZoneButton(id)}.bind(this)}
            onSizeSelect={function(size, id) {this.sizeSelect(size, id)}.bind(this)}
            />
          );
      } else {
        return (
          <DisplayImage2
            index={this.props.index}
            dropZone={this.props.dropZone}
            drag={this.props.drag}
            move={this.props.move}
            borderHover={this.props.borderHover}
            id={this.props.id}
            title={this.props.title}
            sizes={this.props.sizes}
            size={this.state.size}
            toggle={this.state.toggle}
            imageWidth={this.props.imageWidth}
            image={this.state.image}
            onFlipImage={function(len) {this.flipImage(len)}.bind(this)}
            onToDefault={function() {this.toDefault()}.bind(this)}
            onButtonDrop={function(id) {this.dropZoneButton(id)}.bind(this)}
            onSizeSelect={function(size, id) {this.sizeSelect(size, id)}.bind(this)}
            />
        );
      }
  }
})

var ExtractObjects = React.createClass({
  render: function() {
      return (
        <div className="columns is-vcentered">
        {this.props.objects.map(function(object, index){
          if(object.index == this.props.len - 1 && this.props.admin) {
            if(this.props.factor) {
              return ([
                <DisplayImage
                     dropZone={this.props.dropZone}
                     drag={this.props.drag}
                     move={this.props.move}
                     borderHover={this.props.borderHover}
                     admin={this.props.admin}
                     len={this.props.len}
                     key={this.props.objects[index].id}
                     index={object.index}
                     jean={object}
                     SKU={object.SKU}
                     color={object.color}
                     description={object.description}
                     id={object.id}
                     image={object.image}
                     sizes={object.sizes}
                     title={object.title}
                     remainder={this.props.remainder}
                     imageWidth={this.props.imageWidth}
                     />,
                  <BoxDash
                      imageWidth={this.props.imageWidth}/>
                 ]);
            } else {
            return (
              <DisplayImage
                  dropZone={this.props.dropZone}
                  drag={this.props.drag}
                  move={this.props.move}
                  borderHover={this.props.borderHover}
                  admin={this.props.admin}
                  len={this.props.len}
                  key={this.props.objects[index].id}
                  index={object.index}
                  jean={object}
                  SKU={object.SKU}
                  color={object.color}
                  description={object.description}
                  id={object.id}
                  image={object.image}
                  sizes={object.sizes}
                  title={object.title}
                  remainder={this.props.remainder}
                  imageWidth={this.props.imageWidth}
                  />
            );
            }
          } else {
            return (
                  <DisplayImage
                      dropZone={this.props.dropZone}
                      drag={this.props.drag}
                      move={this.props.move}
                      borderHover={this.props.borderHover}
                      len={this.props.len}
                      key={index}
                      index={object.index}
                      jean={object}
                      SKU={object.SKU}
                      color={object.color}
                      description={object.description}
                      id={object.id}
                      image={object.image}
                      sizes={object.sizes}
                      title={object.title}
                      remainder={this.props.remainder}
                      imageWidth={this.props.imageWidth}
                      />
              )
          }

        }.bind(this))}
        </div>
    );
  }
});

var ident = 17;

//Object literal or Class with properties and methods
//this class holds function expressions(methods)

var Ecommerce = React.createClass({
  componentWillReceiveProps: function(a) {
    var len = a.initialJeans.length;
    var arrOfObj = []
    var rem = len % this.state.columns;
    var rows = len / this.state.columns;
    var factor;

    var prevPos = 0;
    var Pos = this.state.columns;
    for(var i = 0; i < rows; i++) {
      arrOfObj.push(a.initialJeans.slice(prevPos, Pos));
      prevPos += this.state.columns;
      Pos += this.state.columns;
    }

    if(arrOfObj != null) {
      if (arrOfObj[arrOfObj.length - 1].length != this.state.columns) {
          factor = false;
      } else {
          factor = true;
      }
    }

    this.setState({
      array: arrOfObj,
      len: len,
      rows: rows,
      remainder: rem,
      arrLen: arrOfObj.length,
      factor: factor
    })
  },
  getInitialState: function() {
      if(this.props.initialJeans.length != 0) {
          var admin = true;
          var len = this.props.initialJeans.length;
          var arrOfObj = [];
          var columns = 4;
          var rem = len % columns;
          // console.log("what dkfsjlkf",columns - rem)
          var rows = len / columns;

          var copy = [...this.props.initialJeans];

          var prevPos = 0;
          var Pos = columns;
          for(var i = 0; i < rows; i++) {
            arrOfObj.push(copy.slice(prevPos, Pos));
            prevPos += columns;
            Pos += columns;
          }

        return {
          array: arrOfObj,
          remainder: rem,
          len: this.props.initialJeans.length,
          columns: columns,
          rows: rows,
          admin: admin,
          imageWidth: Math.round(12/columns),
          arrLen: arrOfObj.length
        }
      } else {
        return {
          array: null,
          admin: true
        }
      }

  },
  componentDidMount: function() {
    if(this.state.array != null && this.state.arrLen) {
      if (this.state.array[this.state.arrLen - 1].length != this.state.columns) {
        this.setState({
          factor: false
        })
      } else {
        this.setState({
          factor: true
        })
      }
    } else {
      console.warn("Ecommerce: componentDidMount is not in use :(")
    }
  },
  componentDidUpdate: function() {
    if(this.state.newColumns != undefined && this.state.newColumns != this.state.columns) {
        var len = this.props.initialJeans.length;
        var columns = this.state.newColumns;
        var rem = len % this.state.newColumns;
        var rows = len / this.state.newColumns;
        var arrOfObj = [];
        var prevPos = 0;
        var Pos = this.state.newColumns;
        var factor;

        for(var i = 0; i < rows; i++) {
          arrOfObj.push(this.props.initialJeans.slice(prevPos, Pos));
          prevPos += this.state.newColumns;
          Pos += this.state.newColumns;
        }

        if(this.state.array != null) {
          if (arrOfObj[arrOfObj.length - 1].length != this.state.newColumns) {
              factor = false;
          } else {
              factor = true;
          }
        }

        this.setState({
          array: arrOfObj,
          columns: this.state.newColumns,
          imageWidth: Math.round(12 / this.state.newColumns),
          arrLen: arrOfObj.length,
          rows: rows,
          factor: factor
        })

    }
  },
  columnManagement: function(delta) {
    var prev = this.state.columns;
    var curr = prev + delta;
    if(curr < 1) {
      curr = 1;
    } else if(curr > 6) {
      curr = 6;
    }
    this.state.newColumns = curr;
    this.setState({})
  },

  render: function() {
    // console.log(this.state.factor)
    // console.log(this.state.arrLen - 1);
    // var arrOfObj = [];
    // var prevPos = 0;
    // var Pos = this.state.columns;
    // for(var i = 0; i < this.state.rows; i++) {
    //   arrOfObj.push(this.props.initialJeans.slice(prevPos, Pos));
    //   prevPos += this.state.columns;
    //   Pos += this.state.columns;
    // }
    if(this.state.array == null || this.state.array.length === 0){
      if(this.state.admin) {
        return (
          <BoxDash columnWidth={this.state.columnWidth} />
        );
      } else {
        return(
          <div>
            <h1> this page doesnt have content </h1>
          </div>
        )
      }
    } else {
      return (
        <div className="container">
          {this.state.array.map(function(objects, index) {
            if(this.state.admin) {
              if(index === 0) {
                return ([
                  <ManageColumns
                          onColumnManagement={this.columnManagement}/>,
                  <ExtractObjects
                          dropZone={this.props.dropZone}
                          drag={this.props.drag}
                          move={this.props.move}
                          borderHover={this.props.borderHover}
                          admin={this.state.admin}
                          key={index}
                          objects={objects}
                          remainder={this.state.remainder}
                          len={this.state.len}
                          columns={this.state.columns}
                          imageWidth={this.state.imageWidth}
                          rows={this.state.rows}
                          />
                        ])
              } else if (index === this.state.arrLen - 1 && this.state.factor) {
                return ([
                  <ExtractObjects
                        dropZone={this.props.dropZone}
                        drag={this.props.drag}
                        move={this.props.move}
                        borderHover={this.props.borderHover}
                        admin={this.state.admin}
                        key={index}
                        objects={objects}
                        remainder={this.state.remainder}
                        len={this.state.len}
                        columns={this.state.columns}
                        imageWidth={this.state.imageWidth}
                        rows={this.state.rows}/>,
                  <BoxDash
                        imageWidth={this.state.imageWidth}
                        factor={true}/>
                   ])
              } else {
                return (
                  <ExtractObjects
                          dropZone={this.props.dropZone}
                          drag={this.props.drag}
                          move={this.props.move}
                          borderHover={this.props.borderHover}
                          admin={this.state.admin}
                          key={index}
                          objects={objects}
                          remainder={this.state.remainder}
                          len={this.state.len}
                          columns={this.state.columns}
                          imageWidth={this.state.imageWidth}
                          rows={this.state.rows}
                          factor={true}/>
                        );
              }
            } else {
              return (
                <ExtractObjects
                        admin={this.state.admin}
                        key={index}
                        objects={objects}
                        remainder={this.state.remainder}
                        len={this.state.len}
                        columns={this.state.columns}
                        imageWidth={this.state.imageWidth}
                        rows={this.state.rows}/>
                      );
            }
          }.bind(this))}
        </div>
      );
    }
  }
});

var obj, x, y, prev_x, prev_y;
var myArr = [];
var Beginning = React.createClass({
  move: function(e) {
    if(e.pageX) {
      x = e.pageX;
      y = e.pageY;
    }
  // If the object specifically is selected, then move it to the X/Y coordinates that are always being tracked.
  if(obj) {
    obj.style.left = (x - prev_x) + 'px';
    obj.style.top = (y - prev_y) + 'px';
  }
  },
  drag: function(e) {
    // Yep, use the object I just clicked on.
  obj = e.target;
  // Set current X coordinate minus distance left from offsetParent node.
  prev_x = x - obj.offsetLeft;
  // Set current Y coordinate minus distance top from offsetParent node.
  prev_y = y - obj.offsetTop;
  //quickie
  },
  borderHover: function(e, style) {
    myArr.push(e.target.id)
      if(myArr[0] == e.target.id && e.type == "dragover") {
        e.target.style.boxShadow = "inset 0 1px 1px rgba(0,0,0, 0.5), 0 0 50px rgb(66, 134, 244)";
      } else if(e.type == "drop") {
        e.target.style.boxShadow = "none"
        console.log(myArr, "myArr")
        myArr = [];
      } else {
        e.target.style.boxShadow = style;
      }

  },
  dropZone: function(e) {
    var cell = e.target;
    var cellWidth = cell.clientWidth;
    var coordinates = cell.getBoundingClientRect();
    var x = e.pageX - coordinates.left;
    var dataID = e.dataTransfer.getData("data");

    if(dataID != e.target.id) {
      if( x < cellWidth/2) {
        this.state.data.splice(e.target.id, 0, this.state.data.splice(this.state.data[dataID].index, 1)[0])
      } else {
        this.state.data.splice(e.target.id, 0, this.state.data.splice(this.state.data[dataID].index, 1)[0])
      }
    }

    this.setState({
      data: this.state.data
    })
  },
  getInitialState: function() {
    var copy = [...this.props.initialJeans];
    return {
      data: copy
    }
  },
  render: function() {
    var arr = [];
    this.state.data.forEach(function(data, index) {
      data.index = index;
      arr.push(data);
    })
    return (
      <div>
        <Ecommerce
          initialJeans={arr}
          dropZone={function(e, id) {this.dropZone(e, id)}.bind(this)}
          borderHover={function(e, style, id) {this.borderHover(e, style, id)}.bind(this)}
          drag={function(e) {this.drag(e)}.bind(this)}
          move={function(e) {this.move(e)}.bind(this)}
          />
      </div>
    )
  }
})

ReactDOM.render(<Beginning initialJeans={JEANS} />, document.getElementById("root"));
/***********************************************************/
// propTypes: {
//   initialJeans: React.PropTypes.arrayOf(React.PropTypes.shape({
//     SKU: React.PropTypes.number.isRequired,
//     title: React.PropTypes.string.isRequired,
//     fit: React.PropTypes.string.isRequired,
//     color: React.PropTypes.string.isRequired,
//     size: React.PropTypes.arrayOf(React.PropTypes.number.isRequired),
//     image: React.PropTypes.arrayOf(React.PropTypes.string.isRequired),
//     description: React.PropTypes.string.isRequired,
//     id: React.PropTypes.number.isRequired,
//   })).isRequired
// },

// var rotate = function(i, j) {
//   if(this.state.array[i+1]) {
//     if(i === 0) {
//       this.state.array[i].push(this.state.array[i+1].splice(0,1)[0]);
//       rotate(i + 1, 0);
//     } else if(j <= i) {
//       var object = this.state.array[i+1].splice(0,1)[0];
//       if(object == undefined) {
//         console.log("nope")
//       } else {
//         this.state.array[i].push(object);
//         rotate(i, j + 1);
//       }
//     } else {
//       rotate(i + 1, 0)
//     }
//   }
// }.bind(this);
// rotate(0, 0);


/**********************************************************************************/
// <div className="column">
//     <div className="card">
//       <div className="card-image">
//         <figure className="image is-2by3">
//             <img src={this.state.image} onMouseOver={ function() {
//               var len = this.state.image.length;
//               this.flipImage(len);
//             }.bind(this) } onMouseOut={function() {this.toDefault();}.bind(this)} />
//         </figure>
//       </div>
//     </div>
//     <div>
//       {this.props.title}
//       <ButtonDrop
//           toggle={this.state.toggle}
//           sizes={this.props.size}
//           index={this.props.index}
//           size={this.state.size}
//           onSizeSelect={function(size, index) { this.sizeSelect(size, index)}.bind(this)}
//           onButtonDrop={function(index) { this.dropButton(index)}.bind(this)}/>
//     </div>
// </div>



// {this.state.jean.map(function(jean, index) {
//   this.state.image = jean.image;
//   return <ImageFrame
//       index={index}
//       id={jean.id}
//       length={this.props.length}
//       remainder={this.props.remainder}
//       image={this.state.image}
//       key={jean.id}
//       length={this.props.length}
//       columns={this.props.columns}
//       rows={this.props.rows}
//       toggle={this.state.toggle}
//       sizes={jean.size}
//       index={this.props.index}
//       size={this.state.size}
//       onSizeSelect={function(size, index) { this.sizeSelect(size, index)}.bind(this)}
//       onButtonDrop={function(index) { this.dropButton(index)}.bind(this)}
//       onFlipImage={function(length) { this.flipImage(length)}.bind(this)}
//       onToDefault={function() { this.toDefault()}.bind(this)}
//       />
// }.bind(this))}

// <ButtonDrop
//     id={props.id}
//     toggle={props.toggle}
//     sizes={props.sizes}
//     index={props.index}
//     size={props.size}
//     onSizeSelect={props.onSizeSelect }
//     onButtonDrop={props.onButtonDrop } />
/******************************************************/
/***************DispalyImage component******************************************/
// sizeSelect: function(size, id) {
//   this.setState({ size: size})
//   document.getElementById(id).style.display = "none";
// },
// dropButton: function(id) {
//   var element = document.getElementById(id);
//   var tone = element.className.split(" ")[2];
//   if(tone === "hide") {
//     element.style.display = "none";
//     this.setState({ toggle: "show" })
//   }
//   if(tone === "show")
//   {
//     element.style.display = "block";
//     this.setState({toggle: "hide"})
//   }
// },
// componentDidMount: function() {
//   document.getElementById(this.props.id).style.display = "none";
// },


// function ButtonList(props) {
//   return (
//       <li onClick={function() {props.onSize(props.size, props.id);}}><a>{props.size}</a></li>
//   );
// }
// function ButtonDrop(props) {
//   return (
//     <div className="has-dropdown">
//     <button className="button is-medium" onClick={function() {props.onButtonDrop(props.id); console.log("drop");}}>{props.size}</button>
//       <div className={"dropdown box " + props.toggle + ""} id={props.id}>
//         <ul >
//         {
//           props.sizes.map(function(size, index) {
//             return <ButtonList
//                       key={index}
//                       size={size}
//                       onSize={props.onSizeSelect}
//                       id={props.id}
//                       />
//           })
//         }
//         </ul>
//       </div>
//     </div>
//   );
// }
